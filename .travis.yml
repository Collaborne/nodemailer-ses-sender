dist: trusty
language: node_js
node_js:
- node
cache:
  directories:
  - node_modules
before_install:
- npm config set //registry.npmjs.org/:_authToken=$NPM_TOKEN
- if [ -d node_modules ] && [ x$(cat node_modules/.last-node-version 2>/dev/null) != x$(node -e 'console.log(process.version)') ]; then npm rebuild --update-binary && node -e 'console.log(process.version)' > node_modules/.last-node-version; fi
deploy:
  provider: npm
  email: npm@collaborne.com
  api_key:
    secure: "D4wCrOh2MUfmnIb4UabJEFESPsiD9lzcep4G1qm0BCfRntG8eWSz7AA0vqtw1K7M0nSPJhlUjdAfwDqKl222Y8sKTg1wY7uq+++iQISuQkn4SfDtFrOJ9UKslqGD89vANez1rw224y3GUIuqi+W9u+KuZaQZaahKMJQ4Idb3E6BVuEMKJXny+xWXBg9UtPHLE+Y7Z66O8RWAG6W+3YDybxRBOIXzb46MU6YZybA0mpEDCDfeZENzMFAW0oQEk2Y/NWKd0bBaWp0ooI93s5fqR2GMPcfcOcsPdo0su63nGuTmsEPSSk9Gf8IeXWsFxoOThWwcqCPBzalWjOPtkDvmvk8qpkh8FXwzNE4ZZg/yaLpDtXoKsdWbiW+mm1DxQ/fXZq5AgQhxvaZrv0FwJiwq7M4ucxrWR0RTbBnrXjurl0lOP3s/511FKU3OvZm96p7F5tXYutpL4O/aPqI30JL87tYN9QhZFwak9CJK5kmwszqurevpAokSmp6zmR0+Dzib0U3FsjZYDzkETLSk151Ltqzda/ebhI0Fe/vW6ebKoP1MnXwYWsZO2l4ISiiXleQMrsxD1uSI5w+ojOov7+F8w71r6xiACKF1enepQFQrOqamXpHvu1mJtP3pBxnQsNRbm0CYHzlxp9tiKTie79BKU1wDGDYQ0aL4HTaiI8qyyLo="
  on:
    tags: true
    condition: $(node -e 'console.log("v" + require("./package.json").version)') = ${TRAVIS_TAG}
  skip_cleanup: true
env:
  global:
  - secure: "Oa5qs5nWpfhTmGzKmF+sOk5IYHUw4ZOsb0PekqExTMijV7yf7vtjhVbLXEp5UqEQFwLjdnZIwerizc28tD0qzEPZXjKPo0cNQOpPapUW161rWXvHVZvG6KN2hkbyNbMuc8rzxMPKZJxikgZjSQJ+74Kz41qRXpzuMi7caJupHkt1hSnxV3YDHcLe/HZxAKDWtr/cqGgmdR3xXS2eJDlnoMuygDV5fGdEhPkn04ooRc+EBV+yakPoXtpb8dkoXNayqtSxuYR2fCbCMUF8IIZyCzqCMjCbC4xwXCEOoJ6Z1FshhM0tMhakTX21OE+iwlR9k/1oFnI/t8ldXO9IPAnefyGDxyeaYojiplwM4Zd2bjop1p3d0QEWP9244kRfHfMsERp+7KcWw2WYEjGyAkbCPXPMQx3Lk0+X5cCiwmEeaTTAsSej+g9qvWDl/JZPwmyFQZtGBqxMx+yRtmL2PGI3kQLc+qpuUL+zTnn2NdJvEXqoMMEDl6BCHqo51rscHywbUL9NZHYp5k9e85tSTYBog1dCGMC82YQqwDWSLt+Zk+lcu5+oehyxFadjvd2y+C7wqtfIpVWMEYL8I73l5YC4L5c2PhMO84dcNI+fGyE+OVUOH4LwvTXm/Yd7pO3p5YXsgvFnIxZwmETw+7l9pXZ5hSkAuJBi2zKBxzhfPnNbn9c="
